{% extends 'base.html' %}
{% load static %}

{% block title %}Contrato de Compra e Venda de Imóvel - Central de Contratos{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="py-5 contract-form-hero">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-8 mx-auto hero-content">
                <div class="contract-icon mb-4">
                    <i class="fas fa-home"></i>
                </div>
                <h1 class="hero-title">Contrato de Compra e Venda de Imóvel</h1>
                <p class="hero-subtitle">
                    Formulário completo para gerar um contrato de compra e venda de imóvel juridicamente válido.
                    Preencha todos os dados com atenção para garantir a validade do documento.
                </p>
                <div class="contract-features mt-4">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="feature-item">
                                <i class="fas fa-shield-check text-primary"></i>
                                <span>Juridicamente Válido</span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-item">
                                <i class="fas fa-file-pdf text-primary"></i>
                                <span>Download em PDF</span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-item">
                                <i class="fas fa-clock text-primary"></i>
                                <span>Completo e Seguro</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Form Section -->
<section class="py-5 form-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-12 col-xl-10">
                <div class="form-card">
                    <div class="form-card-header">
                        <h3 class="form-title">
                            <i class="fas fa-edit me-2"></i>
                            Dados do Contrato de Compra e Venda de Imóvel
                        </h3>
                        <p class="form-subtitle">
                            Preencha todos os campos obrigatórios. Os dados do cônjuge só aparecerão se o estado civil for "Casado".
                        </p>
                    </div>
                    
                    <div class="form-card-body">
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                    <i class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}exclamation-circle{% else %}info-circle{% endif %} me-2"></i>
                                    {{ message }}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
                                </div>
                            {% endfor %}
                        {% endif %}

                        <form method="post" id="contratoForm" novalidate>
                            {% csrf_token %}
                            
                            <!-- Seção Proprietário -->
                            <div class="form-section-wrapper">
                                <div class="section-header">
                                    <h4 class="section-title">
                                        <i class="fas fa-user-tie me-2"></i>
                                        1. Dados do Proprietário
                                    </h4>
                                    <p class="section-subtitle">Informações da pessoa que está vendendo o imóvel</p>
                                </div>
                                
                                <div class="row g-3">
                                    <div class="col-md-8">
                                        <label for="{{ form.proprietario_nome.id_for_label }}" class="form-label required">Nome Completo</label>
                                        {{ form.proprietario_nome }}
                                        {% if form.proprietario_nome.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_nome.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.proprietario_estado_civil.id_for_label }}" class="form-label required">Estado Civil</label>
                                        {{ form.proprietario_estado_civil }}
                                        {% if form.proprietario_estado_civil.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_estado_civil.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.proprietario_nacionalidade.id_for_label }}" class="form-label required">Nacionalidade</label>
                                        {{ form.proprietario_nacionalidade }}
                                        {% if form.proprietario_nacionalidade.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_nacionalidade.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.proprietario_profissao.id_for_label }}" class="form-label required">Profissão</label>
                                        {{ form.proprietario_profissao }}
                                        {% if form.proprietario_profissao.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_profissao.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.proprietario_rg.id_for_label }}" class="form-label required">RG</label>
                                        {{ form.proprietario_rg }}
                                        {% if form.proprietario_rg.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_rg.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.proprietario_cpf.id_for_label }}" class="form-label required">CPF</label>
                                        {{ form.proprietario_cpf }}
                                        {% if form.proprietario_cpf.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_cpf.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Endereço do Proprietário -->
                                <h6 class="mt-4 mb-3">Endereço do Proprietário</h6>
                                <div class="row g-3">
                                    <div class="col-md-8">
                                        <label for="{{ form.proprietario_endereco_rua.id_for_label }}" class="form-label required">Rua</label>
                                        {{ form.proprietario_endereco_rua }}
                                        {% if form.proprietario_endereco_rua.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_endereco_rua.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.proprietario_endereco_numero.id_for_label }}" class="form-label required">Número</label>
                                        {{ form.proprietario_endereco_numero }}
                                        {% if form.proprietario_endereco_numero.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_endereco_numero.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.proprietario_endereco_bairro.id_for_label }}" class="form-label required">Bairro</label>
                                        {{ form.proprietario_endereco_bairro }}
                                        {% if form.proprietario_endereco_bairro.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_endereco_bairro.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.proprietario_endereco_cidade.id_for_label }}" class="form-label required">Cidade</label>
                                        {{ form.proprietario_endereco_cidade }}
                                        {% if form.proprietario_endereco_cidade.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_endereco_cidade.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.proprietario_endereco_estado.id_for_label }}" class="form-label required">Estado</label>
                                        {{ form.proprietario_endereco_estado }}
                                        {% if form.proprietario_endereco_estado.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_endereco_estado.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.proprietario_endereco_cep.id_for_label }}" class="form-label">CEP</label>
                                        {{ form.proprietario_endereco_cep }}
                                        {% if form.proprietario_endereco_cep.errors %}
                                            <div class="invalid-feedback d-block">{{ form.proprietario_endereco_cep.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Dados do Cônjuge do Proprietário -->
                                <div id="proprietario-conjuge-fields" class="conjuge-fields">
                                    <h6 class="mt-4 mb-3">Dados do Cônjuge do Proprietário</h6>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="{{ form.proprietario_conjuge_nome.id_for_label }}" class="form-label">Nome Completo do Cônjuge</label>
                                            {{ form.proprietario_conjuge_nome }}
                                            {% if form.proprietario_conjuge_nome.errors %}
                                                <div class="invalid-feedback d-block">{{ form.proprietario_conjuge_nome.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-6">
                                            <label for="{{ form.proprietario_conjuge_nacionalidade.id_for_label }}" class="form-label">Nacionalidade</label>
                                            {{ form.proprietario_conjuge_nacionalidade }}
                                            {% if form.proprietario_conjuge_nacionalidade.errors %}
                                                <div class="invalid-feedback d-block">{{ form.proprietario_conjuge_nacionalidade.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="{{ form.proprietario_conjuge_profissao.id_for_label }}" class="form-label">Profissão</label>
                                            {{ form.proprietario_conjuge_profissao }}
                                            {% if form.proprietario_conjuge_profissao.errors %}
                                                <div class="invalid-feedback d-block">{{ form.proprietario_conjuge_profissao.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="{{ form.proprietario_conjuge_rg.id_for_label }}" class="form-label">RG</label>
                                            {{ form.proprietario_conjuge_rg }}
                                            {% if form.proprietario_conjuge_rg.errors %}
                                                <div class="invalid-feedback d-block">{{ form.proprietario_conjuge_rg.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="{{ form.proprietario_conjuge_cpf.id_for_label }}" class="form-label">CPF</label>
                                            {{ form.proprietario_conjuge_cpf }}
                                            {% if form.proprietario_conjuge_cpf.errors %}
                                                <div class="invalid-feedback d-block">{{ form.proprietario_conjuge_cpf.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Seção Comprador -->
                            <div class="form-section-wrapper">
                                <div class="section-header">
                                    <h4 class="section-title">
                                        <i class="fas fa-user-check me-2"></i>
                                        2. Dados do Comprador
                                    </h4>
                                    <p class="section-subtitle">Informações da pessoa que está comprando o imóvel</p>
                                </div>
                                
                                <div class="row g-3">
                                    <div class="col-md-8">
                                        <label for="{{ form.comprador_nome.id_for_label }}" class="form-label required">Nome Completo</label>
                                        {{ form.comprador_nome }}
                                        {% if form.comprador_nome.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_nome.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.comprador_estado_civil.id_for_label }}" class="form-label required">Estado Civil</label>
                                        {{ form.comprador_estado_civil }}
                                        {% if form.comprador_estado_civil.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_estado_civil.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.comprador_nacionalidade.id_for_label }}" class="form-label required">Nacionalidade</label>
                                        {{ form.comprador_nacionalidade }}
                                        {% if form.comprador_nacionalidade.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_nacionalidade.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.comprador_profissao.id_for_label }}" class="form-label required">Profissão</label>
                                        {{ form.comprador_profissao }}
                                        {% if form.comprador_profissao.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_profissao.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.comprador_rg.id_for_label }}" class="form-label required">RG</label>
                                        {{ form.comprador_rg }}
                                        {% if form.comprador_rg.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_rg.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.comprador_cpf.id_for_label }}" class="form-label required">CPF</label>
                                        {{ form.comprador_cpf }}
                                        {% if form.comprador_cpf.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_cpf.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Endereço do Comprador -->
                                <h6 class="mt-4 mb-3">Endereço do Comprador</h6>
                                <div class="row g-3">
                                    <div class="col-md-8">
                                        <label for="{{ form.comprador_endereco_rua.id_for_label }}" class="form-label required">Rua</label>
                                        {{ form.comprador_endereco_rua }}
                                        {% if form.comprador_endereco_rua.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_endereco_rua.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.comprador_endereco_numero.id_for_label }}" class="form-label required">Número</label>
                                        {{ form.comprador_endereco_numero }}
                                        {% if form.comprador_endereco_numero.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_endereco_numero.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.comprador_endereco_bairro.id_for_label }}" class="form-label required">Bairro</label>
                                        {{ form.comprador_endereco_bairro }}
                                        {% if form.comprador_endereco_bairro.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_endereco_bairro.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.comprador_endereco_cidade.id_for_label }}" class="form-label required">Cidade</label>
                                        {{ form.comprador_endereco_cidade }}
                                        {% if form.comprador_endereco_cidade.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_endereco_cidade.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.comprador_endereco_estado.id_for_label }}" class="form-label required">Estado</label>
                                        {{ form.comprador_endereco_estado }}
                                        {% if form.comprador_endereco_estado.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_endereco_estado.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.comprador_endereco_cep.id_for_label }}" class="form-label">CEP</label>
                                        {{ form.comprador_endereco_cep }}
                                        {% if form.comprador_endereco_cep.errors %}
                                            <div class="invalid-feedback d-block">{{ form.comprador_endereco_cep.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Dados do Cônjuge do Comprador -->
                                <div id="comprador-conjuge-fields" class="conjuge-fields">
                                    <h6 class="mt-4 mb-3">Dados do Cônjuge do Comprador</h6>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="{{ form.comprador_conjuge_nome.id_for_label }}" class="form-label">Nome Completo do Cônjuge</label>
                                            {{ form.comprador_conjuge_nome }}
                                            {% if form.comprador_conjuge_nome.errors %}
                                                <div class="invalid-feedback d-block">{{ form.comprador_conjuge_nome.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-6">
                                            <label for="{{ form.comprador_conjuge_nacionalidade.id_for_label }}" class="form-label">Nacionalidade</label>
                                            {{ form.comprador_conjuge_nacionalidade }}
                                            {% if form.comprador_conjuge_nacionalidade.errors %}
                                                <div class="invalid-feedback d-block">{{ form.comprador_conjuge_nacionalidade.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="{{ form.comprador_conjuge_profissao.id_for_label }}" class="form-label">Profissão</label>
                                            {{ form.comprador_conjuge_profissao }}
                                            {% if form.comprador_conjuge_profissao.errors %}
                                                <div class="invalid-feedback d-block">{{ form.comprador_conjuge_profissao.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="{{ form.comprador_conjuge_rg.id_for_label }}" class="form-label">RG</label>
                                            {{ form.comprador_conjuge_rg }}
                                            {% if form.comprador_conjuge_rg.errors %}
                                                <div class="invalid-feedback d-block">{{ form.comprador_conjuge_rg.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="{{ form.comprador_conjuge_cpf.id_for_label }}" class="form-label">CPF</label>
                                            {{ form.comprador_conjuge_cpf }}
                                            {% if form.comprador_conjuge_cpf.errors %}
                                                <div class="invalid-feedback d-block">{{ form.comprador_conjuge_cpf.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Seção Imóvel -->
                            <div class="form-section-wrapper">
                                <div class="section-header">
                                    <h4 class="section-title">
                                        <i class="fas fa-home me-2"></i>
                                        3. Dados do Imóvel
                                    </h4>
                                    <p class="section-subtitle">Informações detalhadas sobre o imóvel</p>
                                </div>
                                
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="{{ form.imovel_tipo.id_for_label }}" class="form-label required">Tipo do Imóvel</label>
                                        {{ form.imovel_tipo }}
                                        {% if form.imovel_tipo.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_tipo.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.imovel_matricula.id_for_label }}" class="form-label required">Número da Matrícula</label>
                                        {{ form.imovel_matricula }}
                                        {% if form.imovel_matricula.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_matricula.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.imovel_iptu.id_for_label }}" class="form-label required">Número do IPTU</label>
                                        {{ form.imovel_iptu }}
                                        {% if form.imovel_iptu.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_iptu.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-12">
                                        <label for="{{ form.imovel_cartorio.id_for_label }}" class="form-label required">Cartório de Registro</label>
                                        {{ form.imovel_cartorio }}
                                        {% if form.imovel_cartorio.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_cartorio.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Endereço do Imóvel -->
                                <h6 class="mt-4 mb-3">Endereço do Imóvel</h6>
                                <div class="row g-3">
                                    <div class="col-md-8">
                                        <label for="{{ form.imovel_endereco_rua.id_for_label }}" class="form-label required">Rua</label>
                                        {{ form.imovel_endereco_rua }}
                                        {% if form.imovel_endereco_rua.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_endereco_rua.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.imovel_endereco_numero.id_for_label }}" class="form-label required">Número</label>
                                        {{ form.imovel_endereco_numero }}
                                        {% if form.imovel_endereco_numero.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_endereco_numero.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.imovel_endereco_bairro.id_for_label }}" class="form-label required">Bairro</label>
                                        {{ form.imovel_endereco_bairro }}
                                        {% if form.imovel_endereco_bairro.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_endereco_bairro.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-4">
                                        <label for="{{ form.imovel_endereco_cidade.id_for_label }}" class="form-label required">Cidade</label>
                                        {{ form.imovel_endereco_cidade }}
                                        {% if form.imovel_endereco_cidade.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_endereco_cidade.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.imovel_endereco_estado.id_for_label }}" class="form-label required">Estado</label>
                                        {{ form.imovel_endereco_estado }}
                                        {% if form.imovel_endereco_estado.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_endereco_estado.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-2">
                                        <label for="{{ form.imovel_endereco_cep.id_for_label }}" class="form-label">CEP</label>
                                        {{ form.imovel_endereco_cep }}
                                        {% if form.imovel_endereco_cep.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_endereco_cep.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Áreas -->
                                <h6 class="mt-4 mb-3">Áreas do Imóvel</h6>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="{{ form.imovel_area_territorial.id_for_label }}" class="form-label required">Área Territorial (m²)</label>
                                        {{ form.imovel_area_territorial }}
                                        {% if form.imovel_area_territorial.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_area_territorial.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="{{ form.imovel_area_construida.id_for_label }}" class="form-label">Área Construída (m²)</label>
                                        {{ form.imovel_area_construida }}
                                        {% if form.imovel_area_construida.errors %}
                                            <div class="invalid-feedback d-block">{{ form.imovel_area_construida.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            <!-- Seção Detalhes da Venda -->
                            <div class="form-section-wrapper">
                                <div class="section-header">
                                    <h4 class="section-title">
                                        <i class="fas fa-money-bill-wave me-2"></i>
                                        4. Detalhes da Venda
                                    </h4>
                                    <p class="section-subtitle">Condições financeiras e prazos</p>
                                </div>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="{{ form.valor_total.id_for_label }}" class="form-label required">Valor Total (R$)</label>
                                        <div class="input-group">
                                            <span class="input-group-text">R$</span>
                                            {{ form.valor_total }}
                                        </div>
                                        {% if form.valor_total.errors %}
                                            <div class="invalid-feedback d-block">{{ form.valor_total.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="{{ form.forma_pagamento.id_for_label }}" class="form-label required">Forma de Pagamento</label>
                                        {{ form.forma_pagamento }}
                                        {% if form.forma_pagamento.errors %}
                                            <div class="invalid-feedback d-block">{{ form.forma_pagamento.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-12">
                                        <label for="{{ form.valor_extenso.id_for_label }}" class="form-label required">Valor por Extenso</label>
                                        {{ form.valor_extenso }}
                                        {% if form.valor_extenso.errors %}
                                            <div class="invalid-feedback d-block">{{ form.valor_extenso.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="{{ form.data_pagamento.id_for_label }}" class="form-label required">Data de Pagamento</label>
                                        {{ form.data_pagamento }}
                                        {% if form.data_pagamento.errors %}
                                            <div class="invalid-feedback d-block">{{ form.data_pagamento.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="{{ form.data_entrega.id_for_label }}" class="form-label required">Data de Entrega</label>
                                        {{ form.data_entrega }}
                                        {% if form.data_entrega.errors %}
                                            <div class="invalid-feedback d-block">{{ form.data_entrega.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-12">
                                        <label for="{{ form.conta_bancaria.id_for_label }}" class="form-label">Conta Bancária para Transferência</label>
                                        {{ form.conta_bancaria }}
                                        {% if form.conta_bancaria.errors %}
                                            <div class="invalid-feedback d-block">{{ form.conta_bancaria.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Campos para Pagamento Parcelado -->
                                <div id="parcelado-fields">
                                    <h6 class="mt-4 mb-3">Detalhes do Parcelamento</h6>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="{{ form.quantidade_parcelas.id_for_label }}" class="form-label">Quantidade de Parcelas</label>
                                            {{ form.quantidade_parcelas }}
                                            {% if form.quantidade_parcelas.errors %}
                                                <div class="invalid-feedback d-block">{{ form.quantidade_parcelas.errors.0 }}</div>
                                            {% endif %}
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Datas das Parcelas</label>
                                            <div id="parcelas-container">
                                                <button type="button" class="btn btn-sm btn-outline-primary" id="add-parcela">
                                                    <i class="fas fa-plus me-1"></i>Adicionar Data
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Botões de Ação -->
                            <div class="form-actions">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <a href="{% url 'contracts:catalog' %}" class="btn btn-outline-secondary btn-lg w-100">
                                            <i class="fas fa-arrow-left me-2"></i>
                                            Voltar ao Catálogo
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">
                                            <i class="fas fa-paper-plane me-2"></i>
                                            <span class="btn-text">Gerar Contrato</span>
                                            <span class="btn-loading d-none">
                                                <span class="spinner-border spinner-border-sm me-2"></span>
                                                Processando...
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<link href="{% static 'css/compra_venda_form.css' %}" rel="stylesheet">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/compra_venda_form.js' %}"></script>
{% endblock %}
